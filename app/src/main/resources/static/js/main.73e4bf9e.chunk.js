(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{258:function(e,t,a){e.exports=a(548)},263:function(e,t,a){},264:function(e,t,a){},266:function(e,t,a){},277:function(e,t,a){},281:function(e,t,a){},332:function(e,t,a){},530:function(e,t,a){},541:function(e,t,a){},548:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),i=a.n(r),o=(a(263),a(17)),s=a(18),c=a(23),u=a(22),m=a(134),d=a(28),p=(a(264),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,this.props.children)}}]),a}(n.Component)),f=(a(138),a(53)),h=(a(106),a(31)),b=(a(266),a(65)),y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={},e}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"header"},l.a.createElement(f.a,{className:"header-top"},l.a.createElement(h.a,{span:24},l.a.createElement("span",null,"\u6b22\u8fce, ",this.props.username),l.a.createElement("a",{href:"#",style:{color:"#1890ff"}},"\u9000\u51fa"))))}}]),a}(l.a.Component),E=Object(b.b)(function(e){return{menuName:e.menu.menuName,username:e.userInfo.username}})(y),v=(a(277),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"footer"},"\u6b22\u8fce\u4f7f\u7528\u6d41\u5411\u751f\u6210\u7cfb\u7edf")}}]),a}(l.a.Component)),O=(a(278),a(79)),g=[{title:"\u6d41\u5411\u751f\u6210",key:"/order"},{title:"\u5ba2\u6237\u7ba1\u7406",key:"/client"}],w=a(80),j={SWITCH_MENU:"SWITCH_MENU",defaultMenu:{menuName:"\u9996\u9875"},action:{switchMenu:function(e){return{type:j.SWITCH_MENU,menuName:e}}},reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.defaultMenu,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.SWITCH_MENU:return Object(w.a)(Object(w.a)({},e),{},{menuName:t.menuName});default:return Object(w.a)({},e)}}},k=j,I=(a(281),O.a.SubMenu),C=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currentKey:"/order"},e.handleClick=function(t){var a=t.item,n=t.key;console.log(a),(0,e.props.dispatch)(k.action.switchMenu(a.props.title)),e.setState({currentKey:n})},e.renderMenu=function(t){return t.map(function(t){return t.children?l.a.createElement(I,{title:t.title,key:t.key},e.renderMenu(t.children)):l.a.createElement(O.a.Item,{title:t.title,key:t.key},l.a.createElement(m.b,{to:t.key},t.title))})},e}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=this.renderMenu(g),t=window.location.hash.replace(/#|\?.*$/g,"");this.setState({currentKey:t,menuTreeNode:e})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"logo"},l.a.createElement(h.a,{span:5},l.a.createElement("img",{src:"favicon.ico",alt:""})),l.a.createElement(h.a,{span:30},l.a.createElement("h2",null,"\u6d41\u5411\u751f\u6210\u7cfb\u7edf"))),l.a.createElement(O.a,{theme:"dark",selectedKeys:[this.state.currentKey],onClick:this.handleClick},this.state.menuTreeNode))}}]),a}(l.a.Component),S=Object(b.b)()(C),x=(a(332),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(f.a,{className:"container"},l.a.createElement(h.a,{span:3,className:"nav-left"},l.a.createElement(S,null)),l.a.createElement(h.a,{span:21,className:"main"},l.a.createElement(E,null),l.a.createElement(f.a,{className:"content"},this.props.children),l.a.createElement(v,null)))}}]),a}(l.a.Component)),N=(a(237),a(132)),L=(a(64),a(19)),T=(a(171),a(67)),V=(a(85),a(26)),D=a(50),A=a(240),R=a.n(A),F=a(241),M=a.n(F),U=(a(98),a(36)),K=U.a.Option,_={formatDate:function(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"-"+t.getHours()+"-"+t.getMinutes()+"-"+t.getSeconds()},pagination:function(e,t){return{onChange:function(e){t(e)},pageSize:10,total:e.result.length,showTotal:function(){return"\u5171".concat(e.result.length,"\u6761\u6570\u636e")},showQuickJumper:!0}},getOptionList:function(e){if(!e)return[];var t=[];return e.map(function(e){t.push(l.a.createElement(K,{value:e.name,key:e.id},e.name))}),t},updateSelectedItem:function(e,t,a){a?this.setState({selectedRowKeys:e,selectedIds:a,selectedItem:t}):this.setState({selectedRowKeys:e,selectedItem:t})}},P=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"jsonp",value:function(e){return new Promise(function(t,a){R()(e.url,{param:"callback"},function(e,n){"success"===n.status?t(n):a(n.message)})})}},{key:"ajax",value:function(e){e.data&&!1!==e.data.isShowLoading&&(document.getElementById("ajaxLoading").style.display="block");return new Promise(function(t,a){M()({url:e.url,baseURL:"http://120.79.235.169",method:e.data.method,params:e.data&&"get"===e.data.method&&e.data.params||"",data:e.data&&"post"===e.data.method&&e.data.params||null}).then(function(n){if(e.data&&!1!==e.data.isShowLoading&&(document.getElementById("ajaxLoading").style.display="none"),200===n.status){var l=n.data;200===l.code?t(l):V.a.info({title:"\u63d0\u793a",content:l.message}),a(n.data)}})})}},{key:"requestList",value:function(e,t,a,n){var l={params:a,method:n};this.ajax({url:t,data:l}).then(function(t){if(t&&t.result){var a=t.result.map(function(e,t){return e.key=t,e});e.setState({list:a,selectedRowKeys:null,selectedItem:null,pagination:_.pagination(t,function(t){e.params.page=t,e.setState({selectedRowKeys:null,selectedItem:null})})})}})}}]),e}(),Y=(a(550),a(253)),q=(a(366),a(7)),H=(a(549),a(177)),B=(a(154),a(47)),W=(a(99),a(44)),z=(a(155),a(38)),G=z.a.Item,J=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={fileList:[]},e.initFormList=function(){var t=e.props.form.getFieldDecorator,a=e.props.formList,n=[];return a&&a.length>0&&a.forEach(function(a,r){var i=a.label,o=a.field,s=a.initialValue,c=a.placeholder,u=a.width;if("INPUT"===a.type){var m=l.a.createElement(G,{label:i,key:o},t([o],{initialValue:s})(l.a.createElement(W.a,{type:"text",placeholder:c})));n.push(m)}else if("SELECT"===a.type){var d=l.a.createElement(G,{label:i,key:o},t([o],{initialValue:s})(l.a.createElement(U.a,{mode:a.mode,style:{width:u},placeholder:c,allowClear:!0},_.getOptionList(a.list))));n.push(d)}else if("CHECKBOX"===a.type){var p=l.a.createElement(G,{label:i,key:o},t([o],{valuePropName:o,initialValue:s})(l.a.createElement(B.a,null)));n.push(p)}else if("DATE"===a.type){var f=l.a.createElement(G,{label:i,key:o},t([o])(l.a.createElement(H.a,{style:{width:145},mode:"date",placeholder:c,format:"YYYY-MM-DD"})));n.push(f)}else if("RANGE"===a.type){var h=l.a.createElement(G,{label:i,key:o},t([o])(l.a.createElement(H.a.RangePicker,{showTime:!1,placeholder:["\u8d77\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],format:"YYYY-MM-DD"})));n.push(h)}else if("UPLOAD"===a.type){var b=l.a.createElement(G,{label:i,key:o},t([o])(l.a.createElement(Y.a,{headers:{"content-type":"multipart/form-data"},multiple:!1,accept:".xls,.xlsx",beforeUpload:function(){return!1},onChange:function(t){if("done"===t.file.status)if(200===t.file.response.code){var a=t.fileList;e.setState({fileList:a})}else V.a.warn({title:"\u63d0\u793a",content:l.a.createElement("span",null,t.file.response.msg),okText:"ok"});e.setState({fileList:t.fileList})},showUploadList:!0,fileList:e.state.fileList},l.a.createElement(L.a,null,l.a.createElement(q.a,{type:"upload"})," ",c))));n.push(b)}}),n},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(z.a,{layout:"inline"},this.initFormList(),l.a.createElement(G,null,l.a.createElement(L.a,{type:"primary",style:{margin:"0 10px"},onClick:function(){var t=e.props.form.getFieldsValue();e.props.handleSubmit(t),e.setState({fileList:[]})}},this.props.submitButtonName),l.a.createElement(L.a,{type:"primary",onClick:function(){e.props.form.resetFields(),e.setState({fileList:[]})}},"\u91cd\u7f6e")))}}]),a}(l.a.Component),X=z.a.create({})(J),$=a(103),Q=a.n($),Z=a(15),ee=a.n(Z),te=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).params={page:1},e.state={},e.formList=[{type:"DATE",label:"\u65e5\u671f\u8303\u56f4(\u8d77)",field:"startDate",placeholder:"\u8bf7\u9009\u62e9\u8d77\u59cb\u65e5\u671f"},{type:"DATE",label:"\u65e5\u671f\u8303\u56f4(\u6b62)",field:"endDate",placeholder:"\u8bf7\u9009\u62e9\u622a\u6b62\u65e5\u671f"},{type:"UPLOAD",label:"\u6761\u4ef6\u5217\u8868",field:"file",placeholder:"\u8bf7\u4e0a\u4f20excel\u6587\u4ef6"},{type:"SELECT",label:"\u5ba2\u6237\u7c7b\u578b",field:"clientType",placeholder:"\u9ed8\u8ba4\u65e0\u9650\u5236",width:120,mode:"multiple",initialValue:[],list:[{id:1,name:"\u96f6\u552e\u836f\u5e97"},{id:2,name:"\u6279\u53d1\u7ecf\u8425"},{id:3,name:"\u533b\u7597\u673a\u6784"}]}],e.generateOrders=function(){var t=e.params.startDate,a=e.params.endDate,n=e.params.file,r=e.params.clientType;if(t&&a&&n&&n.fileList[0]){if(t>a)return V.a.warn({title:"\u63d0\u793a",content:l.a.createElement("span",null,"\u8d77\u59cb\u65e5\u671f\u4e0d\u5f97\u5927\u4e8e\u622a\u6b62\u65e5\u671f\uff01"),okText:"ok"});var i=new window.FormData;t=ee()(t).format("YYYY-MM-DD"),a=ee()(a).format("YYYY-MM-DD");var o=n.fileList[0].originFileObj;return i.append("startDate",t),i.append("endDate",a),i.append("file",o),i.append("clientTypes",r),P.requestList(Object(D.a)(e),"/order/generate",i,"post")}V.a.warn({title:"\u63d0\u793a",content:l.a.createElement("span",null,"\u7f3a\u5c11\u53c2\u6570\uff01"),okText:"ok"})},e.downloadTemplateFile=function(){var e={fileName:"\u6d41\u5411\u751f\u6210\u6761\u4ef6(\u6a21\u7248)",datas:[{sheetData:[],sheetName:"\u6761\u4ef6\u5217\u8868",sheetHeader:["\u5546\u54c1\u540d\u79f0(\u5fc5\u586b)","\u89c4\u683c","\u751f\u4ea7\u5382\u5546","\u6279\u53f7","\u6709\u6548\u671f","\u5355\u4ef7","\u603b\u6d41\u51fa\u91cf(\u5fc5\u586b, \u4f8b:100)","\u603b\u5ba2\u6237\u6570(\u5fc5\u586b, \u4f8b:10)"]}]};new Q.a(e).saveExcel()},e.downloadResultToExcel=function(){var t=e.state.list,a={},n=[];if(t&&t.length>0)for(var l in t){var r={"\u5546\u54c1\u540d\u79f0":t[l].productName,"\u89c4\u683c":t[l].specification,"\u751f\u4ea7\u5382\u5546":t[l].manufacturer,"\u6279\u53f7":t[l].batchNumber,"\u6709\u6548\u671f":t[l].validityDate,"\u5355\u4ef7":t[l].price,"\u5ba2\u6237":t[l].clientName,"\u6570\u91cf":t[l].quantity,"\u65e5\u671f":t[l].date};n.push(r)}a.fileName="\u5546\u54c1\u6d41\u5411\u8868",a.datas=[{sheetData:n,sheetName:"\u6d41\u5411\u660e\u7ec6",sheetHeader:["\u5546\u54c1\u540d\u79f0","\u89c4\u683c","\u751f\u4ea7\u5382\u5546","\u6279\u53f7","\u6709\u6548\u671f","\u5355\u4ef7","\u5ba2\u6237","\u6570\u91cf","\u65e5\u671f"]}],new Q.a(a).saveExcel()},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(T.a,null,l.a.createElement(X,{formList:this.formList,handleSubmit:function(t){e.params=t,e.generateOrders()},submitButtonName:"\u751f\u6210"})),l.a.createElement(T.a,{style:{marginTop:10}},l.a.createElement(L.a,{type:"primary",icon:"download",onClick:this.downloadTemplateFile},"\u4e0b\u8f7d\u6761\u4ef6\u5217\u8868\u6a21\u7248"),l.a.createElement(L.a,{type:"primary",icon:"download",onClick:this.downloadResultToExcel},"\u4e0b\u8f7d\u7ed3\u679c")),l.a.createElement("div",{className:"content-wrap"},l.a.createElement(N.a,{columns:[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"productName"},{title:"\u89c4\u683c",dataIndex:"specification"},{title:"\u751f\u4ea7\u5382\u5546",dataIndex:"manufacturer"},{title:"\u6279\u53f7",dataIndex:"batchNumber"},{title:"\u6709\u6548\u671f",dataIndex:"validityDate"},{title:"\u5355\u4ef7",dataIndex:"price"},{title:"\u5ba2\u6237",dataIndex:"clientName"},{title:"\u6570\u91cf",dataIndex:"quantity"},{title:"\u65e5\u671f",dataIndex:"date"}],dataSource:this.state.list,pagination:this.state.pagination})))}}]),a}(l.a.Component),ae=(a(197),a(94)),ne=(a(530),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onRowClick=function(t,a){if("checkbox"===e.props.rowSelection){var n=e.props.selectedRowKeys,l=e.props.selectedItem,r=e.props.selectedIds;if(r){var i=r.indexOf(t.id);-1===i?(r.push(t.id),n.push(a),l.push(t)):(r.splice(i,1),l.splice(i,1),n.splice(i,1))}else r=[t.id],n=[a],l=[t];e.props.updateSelectedItem(n,l,r)}else{var o=[a],s=t;e.props.updateSelectedItem(o,s)}},e.tableInit=function(){var t=e.props.rowSelection,a={type:"radio",selectedRowKeys:e.props.selectedRowKeys,onChange:e.onSelectChange};return!1===t||null===t?t=!1:"checkbox"===t?a.type="checkbox":t="radio",l.a.createElement(N.a,Object.assign({},e.props,{bordered:!0,rowSelection:t?a:null,onRow:function(a,n){return{onClick:function(){t&&e.onRowClick(a,n)}}}}))},e}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,this.tableInit())}}]),a}(l.a.Component)),le=z.a.Item,re=(ae.a.Group,W.a.TextArea,U.a.Option),ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).params={page:1,isVisible:!1},e.state={},e.formList=[{type:"UPLOAD",label:"\u5ba2\u6237\u540d\u5355",field:"file",placeholder:"\u8bf7\u4e0a\u4f20excel\u6587\u4ef6"},{type:"CHECKBOX",label:"\u8986\u76d6\u5168\u90e8",field:"override",initialValue:!1}],e.handleUpload=function(t){e.params=t;var a=e.params.override,n=e.params.file;if(n&&n.fileList[0]){var r=new window.FormData,i=n.fileList[0].originFileObj;r.append("override",a),r.append("file",i),P.requestList(Object(D.a)(e),"/client/batchCreate",r,"post")}else V.a.warn({title:"\u63d0\u793a",content:l.a.createElement("span",null,"\u7f3a\u5c11\u53c2\u6570\uff01"),okText:"ok"})},e.listAllClients=function(){P.requestList(Object(D.a)(e),"/client/listAll",null,"get")},e.handleOperate=function(t){var a=e.state.selectedItem;if("list"===t)e.listAllClients(),e.setState({selectedRowKeys:null,selectedItem:null});else if("create"===t)e.setState({type:t,isVisible:!0,title:"\u521b\u5efa\u5ba2\u6237"});else if("edit"===t){if(!a)return void V.a.info({title:"\u63d0\u793a",content:"\u8bf7\u9009\u62e9\u4e00\u6761\u6570\u636e"});e.setState({type:t,isVisible:!0,title:"\u7f16\u8f91\u5ba2\u6237",clientInfo:a})}else if("delete"===t){if(!a)return void V.a.info({title:"\u63d0\u793a",content:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u5ba2\u6237"});var n=Object(D.a)(e);V.a.confirm({title:"\u786e\u8ba4\u5220\u9664",content:"\u662f\u5426\u8981\u5220\u9664\u5f53\u524d\u9009\u4e2d\u6570\u636e",onOk:function(){P.ajax({url:"/client/delete",data:{params:{clientId:a.clientId},method:"get"}}).then(function(e){200===e.code&&(n.setState({isVisible:!1}),n.listAllClients())})}})}},e.handleSubmit=function(){var t=e.state.type,a=e.clientForm.props.form.getFieldsValue(),n=a.clientId,r=a.clientCode,i=a.clientName,o=a.clientType;r&&i&&o?P.ajax({url:"create"===t?"/client/create":"/client/edit",data:{params:{clientId:n,clientCode:r,clientName:i,clientType:o},method:"post"}}).then(function(t){200===t.code&&(e.clientForm.props.form.resetFields(),e.setState({isVisible:!1,selectedRowKeys:null,selectedItem:null}),e.listAllClients())}):V.a.warn({title:"\u63d0\u793a",content:l.a.createElement("span",null,"\u4e0d\u5f97\u6709\u7a7a\u5b57\u6bb5\uff01"),okText:"ok"})},e.downloadTemplateFile=function(){var e={fileName:"\u5ba2\u6237\u540d\u5355(\u6a21\u7248)",datas:[{sheetData:[],sheetName:"\u5ba2\u6237\u540d\u5355",sheetHeader:["\u5ba2\u6237\u4ee3\u7801(\u5fc5\u586b)","\u5ba2\u6237\u540d\u79f0(\u5fc5\u586b)","\u5ba2\u6237\u7c7b\u578b(\u5fc5\u586b)"]}]};new Q.a(e).saveExcel()},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(T.a,null,l.a.createElement(X,{formList:this.formList,handleSubmit:this.handleUpload,submitButtonName:"\u5bfc\u5165"})),l.a.createElement(T.a,{style:{marginTop:10}},l.a.createElement(L.a,{type:"primary",icon:"download",onClick:this.downloadTemplateFile},"\u4e0b\u8f7d\u5ba2\u6237\u540d\u5355\u6a21\u7248"),l.a.createElement(L.a,{type:"primary",icon:"search",style:{marginLeft:10},onClick:function(){return e.handleOperate("list")}},"\u663e\u793a\u6240\u6709\u5ba2\u6237"),l.a.createElement(L.a,{type:"primary",icon:"plus",style:{marginLeft:10},onClick:function(){return e.handleOperate("create")}},"\u521b\u5efa\u5ba2\u6237"),l.a.createElement(L.a,{type:"primary",icon:"edit",style:{marginLeft:10},onClick:function(){return e.handleOperate("edit")}},"\u7f16\u8f91\u5ba2\u6237"),l.a.createElement(L.a,{type:"primary",icon:"delete",style:{marginLeft:10},onClick:function(){return e.handleOperate("delete")}},"\u5220\u9664\u5ba2\u6237")),l.a.createElement("div",{className:"content-wrap"},l.a.createElement(ne,{updateSelectedItem:_.updateSelectedItem.bind(this),columns:[{title:"\u5ba2\u6237\u4ee3\u7801",dataIndex:"clientCode"},{title:"\u5ba2\u6237\u540d\u79f0",dataIndex:"clientName"},{title:"\u5ba2\u6237\u7c7b\u578b",dataIndex:"clientType"}],dataSource:this.state.list,pagination:this.state.pagination,selectedRowKeys:this.state.selectedRowKeys,selectedItem:this.state.selectedItem,rowSelection:"radio",rowKey:function(e){return e.id}})),l.a.createElement(V.a,{title:this.state.title,visible:this.state.isVisible,onOk:this.handleSubmit,onCancel:function(){e.clientForm.props.form.resetFields(),e.setState({isVisible:!1})},width:600},l.a.createElement(oe,{type:this.state.type,clientInfo:this.state.clientInfo,wrappedComponentRef:function(t){e.clientForm=t}})))}}]),a}(l.a.Component),oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.type,t=this.props.clientInfo||{},a=this.props.form.getFieldDecorator,n={labelCol:{span:5},wrapperCol:{span:15}};return l.a.createElement(z.a,{layout:"horizontal"},l.a.createElement(le,{label:"\u5ba2\u6237ID",style:{display:"none"}},a("clientId","edit"===e?{initialValue:t.clientId}:{initialValue:void 0})(l.a.createElement(W.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237ID"}))),l.a.createElement(le,Object.assign({label:"\u5ba2\u6237\u4ee3\u7801"},n),a("clientCode","edit"===e?{initialValue:t.clientCode}:{initialValue:void 0})(l.a.createElement(W.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237\u4ee3\u7801"}))),l.a.createElement(le,Object.assign({label:"\u5ba2\u6237\u540d\u79f0"},n),a("clientName","edit"===e?{initialValue:t.clientName}:{initialValue:void 0})(l.a.createElement(W.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237\u540d\u79f0"}))),l.a.createElement(le,Object.assign({label:"\u5ba2\u6237\u7c7b\u578b"},n),a("clientType","edit"===e?{initialValue:t.clientType}:{initialValue:void 0})(l.a.createElement(U.a,{placeholder:"\u8bf7\u9009\u62e9\u5ba2\u6237\u7c7b\u578b"},l.a.createElement(re,{value:"\u96f6\u552e\u836f\u5e97"},"\u96f6\u552e\u836f\u5e97"),l.a.createElement(re,{value:"\u6279\u53d1\u7ecf\u8425"},"\u6279\u53d1\u7ecf\u8425"),l.a.createElement(re,{value:"\u533b\u7597\u673a\u6784"},"\u533b\u7597\u673a\u6784")))))}}]),a}(l.a.Component);oe=z.a.create({})(oe);a(531);var se=a(254),ce=(a(533),a(179)),ue=U.a.Option,me=z.a.Item,de=ce.a.TreeNode,pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={},e.params={page:1},e.handleClearContent=function(){e.setState({isRoleVisible:!0})},e.handleRoleSubmit=function(){var t=e.roleForm.props.form.getFieldsValue();P.ajax({url:"roleCreate",data:{params:t}}).then(function(t){200===t.code&&(e.setState({isRoleVisible:!1}),e.roleForm.props.form.resetFields(),P.requestList(Object(D.a)(e),"roleList",{},!0))})},e.handlePermission=function(){var t=e.state.selectedItem;t?e.setState({isPermVisible:!0,detailInfo:t,menuInfo:t.menus}):V.a.info({title:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u89d2\u8272"})},e.handlePermEditSubmit=function(){var t=e.permForm.props.form.getFieldsValue();t.role_id=e.state.selectedItem.id,t.menus=e.state.menuInfo,P.ajax({url:"permissionEdit",data:{params:Object(w.a)({},t)}}).then(function(t){t&&(e.setState({isPermVisible:!1}),P.requestList(Object(D.a)(e),"roleList",{},!0))})},e.handleUserAuth=function(){var t=e.state.selectedItem;t?(e.setState({isUserVisible:!0,detailInfo:t}),e.getRoleUserList(t.id)):V.a.info({title:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u89d2\u8272"})},e.getRoleUserList=function(t){P.ajax({url:"userList",data:{params:{id:t}}}).then(function(t){t&&e.getAuthUserList(t.result)})},e.getAuthUserList=function(t){var a=[],n=[];if(t&&t.length>0){for(var l=0;l<t.length;l++){var r={key:t[l].user_id,title:t[l].user_name,status:t[l].status};1===r.status&&n.push(r.key),a.push(r)}e.setState({mockData:a,targetKeys:n})}},e.handleUserSubmit=function(){var t={};t.user_ids=e.state.targetKeys,t.role_id=e.state.selectedItem.id,P.ajax({url:"/user_role_edit",data:{params:Object(w.a)({},t)}}).then(function(t){t&&(e.setState({isUserVisible:!1}),P.requestList(Object(D.a)(e),"roleList",{},!0))})},e}return Object(s.a)(a,[{key:"componentWillMount",value:function(){P.requestList(this,"roleList",{},!0)}},{key:"render",value:function(){var e=this,t=[{title:"\u89d2\u8272ID",dataIndex:"id"},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"role_name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time"},{title:"\u4f7f\u7528\u72b6\u6001",dataIndex:"status",render:function(e){return 1===e?"\u542f\u7528":"\u505c\u7528"}},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"authorize_time",render:_.formatDate},{title:"\u6388\u6743\u4eba",dataIndex:"authorize_user_name"}];return l.a.createElement("div",null,l.a.createElement(T.a,null,l.a.createElement(L.a,{type:"primary",onClick:this.handleClearContent},"\u521b\u5efa\u89d2\u8272"),l.a.createElement(L.a,{type:"primary",onClick:this.handlePermission},"\u8bbe\u7f6e\u6743\u9650"),l.a.createElement(L.a,{type:"primary",onClick:this.handleUserAuth},"\u7528\u6237\u6388\u6743")),l.a.createElement("div",{className:"content-wrap"},l.a.createElement(ne,{updateSelectedItem:_.updateSelectedItem.bind(this),selectedRowKeys:this.state.selectedRowKeys,dataSource:this.state.list,columns:t})),l.a.createElement(V.a,{title:"\u521b\u5efa\u89d2\u8272",visible:this.state.isRoleVisible,onOk:this.handleRoleSubmit,onCancel:function(){e.roleForm.props.form.resetFields(),e.setState({isRoleVisible:!1})}},l.a.createElement(fe,{wrappedComponentRef:function(t){return e.roleForm=t}})),l.a.createElement(V.a,{title:"\u6743\u9650\u8bbe\u7f6e",visible:this.state.isPermVisible,width:600,onOk:this.handlePermEditSubmit,onCancel:function(){e.setState({isPermVisible:!1})}},l.a.createElement(he,{wrappedComponentRef:function(t){return e.permForm=t},detailInfo:this.state.detailInfo,menuInfo:this.state.menuInfo,patchMenuInfo:function(t){e.setState({menuInfo:t})}})),l.a.createElement(V.a,{title:"\u7528\u6237\u6388\u6743",visible:this.state.isUserVisible,width:800,onOk:this.handleUserSubmit,onCancel:function(){e.setState({isUserVisible:!1})}},l.a.createElement(be,{wrappedComponentRef:function(t){return e.userAuthForm=t},detailInfo:this.state.detailInfo,targetKeys:this.state.targetKeys,mockData:this.state.mockData,patchUserInfo:function(t){e.setState({targetKeys:t})}})))}}]),a}(l.a.Component),fe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:5},wrapperCol:{span:19}};return l.a.createElement(z.a,{layout:"horizontal"},l.a.createElement(me,Object.assign({label:"\u89d2\u8272\u540d\u79f0"},t),e("role_name")(l.a.createElement(W.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}))),l.a.createElement(me,Object.assign({label:"\u72b6\u6001"},t),e("state")(l.a.createElement(U.a,null,l.a.createElement(ue,{value:1},"\u5f00\u542f"),l.a.createElement(ue,{value:0},"\u5173\u95ed")))))}}]),a}(l.a.Component);fe=z.a.create({})(fe);var he=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onCheck=function(t){e.props.patchMenuInfo(t)},e.renderTreeNodes=function(t){return t.map(function(t){return t.children?l.a.createElement(de,{title:t.title,key:t.key},e.renderTreeNodes(t.children)):l.a.createElement(de,{title:t.title,key:t.key})})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props.detailInfo,n=this.props.menuInfo,r={labelCol:{span:5},wrapperCol:{span:19}};return l.a.createElement(z.a,{layout:"horizontal"},l.a.createElement(me,Object.assign({label:"\u89d2\u8272\u540d\u79f0"},r),l.a.createElement(W.a,{disabled:!0,placeholder:a.role_name})),l.a.createElement(me,Object.assign({label:"\u72b6\u6001"},r),t("status",{initialValue:1===a.status?"1":"0"})(l.a.createElement(U.a,null,l.a.createElement(ue,{value:"1"},"\u542f\u7528"),l.a.createElement(ue,{value:"0"},"\u505c\u7528")))),l.a.createElement(ce.a,{checkable:!0,defaultExpandAll:!0,onCheck:function(t){e.onCheck(t)},checkedKeys:n},l.a.createElement(de,{title:"\u5e73\u53f0\u6743\u9650",key:"platform_all"},this.renderTreeNodes(g))))}}]),a}(l.a.Component);he=z.a.create({})(he);var be=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).onCheck=function(t){e.props.patchMenuInfo(t)},e.filterOption=function(e,t){return t.title.indexOf(e)>-1},e.handleChange=function(t){e.props.patchUserInfo(t)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.detailInfo,t={labelCol:{span:5},wrapperCol:{span:19}};return l.a.createElement(z.a,{layout:"horizontal"},l.a.createElement(me,Object.assign({label:"\u89d2\u8272\u540d\u79f0"},t),l.a.createElement(W.a,{disabled:!0,placeholder:e.role_name})),l.a.createElement(me,Object.assign({label:"\u9009\u62e9\u7528\u6237"},t),l.a.createElement(se.a,{listStyle:{width:200,height:400},dataSource:this.props.mockData,titles:["\u5f85\u9009\u7528\u6237","\u5df2\u9009\u7528\u6237"],showSearch:!0,searchPlaceholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",filterOption:this.filterOption,targetKeys:this.props.targetKeys,render:function(e){return e.title},onChange:this.handleChange})))}}]),a}(l.a.Component);be=z.a.create({})(be);a(541),a(542);var ye={ACTION_SAVE:"user_save",ACTION_REMOVE:"user_remove",defaultUserInfo:{username:""},action:{save:function(e){return{type:ye.ACTION_SAVE,userInfo:e}},remove:function(){return{type:ye.ACTION_REMOVE}}},reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.defaultUserInfo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye.ACTION_SAVE:return t.userInfo||{};case ye.ACTION_REMOVE:return ye.defaultUserInfo;default:return e}}},Ee=ye,ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",permissions:[]},e.login=function(){var t=e.state,a=t.username,n=t.password;if(!a||!n)return V.a.warn({title:"\u63d0\u793a",content:l.a.createElement("span",null,"\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e0d\u5f97\u4e3a\u7a7a\uff01"),okText:"ok"});P.ajax({url:"/user/authenticate",data:{params:{username:a,password:n},method:"post"}}).then(function(t){200===t.code?(e.setState({permissions:t.permissions}),(0,e.props.dispatch)(Ee.action.save({username:e.state.username})),window.location.href="http://120.79.235.169"):V.a.warn({title:"\u63d0\u793a",content:l.a.createElement("span",null,t.message),okText:"ok"})})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"login-page"},l.a.createElement("dl",{className:"login-wrapper"},l.a.createElement("dt",null,l.a.createElement("b",null,"\u6d41\u5411\u751f\u6210\u7cfb\u7edf")),l.a.createElement("dd",{className:"login-box"},l.a.createElement("div",{className:"login-tips"},l.a.createElement(l.a.Fragment,null)),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("input",{type:"text",name:"username",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",onChange:function(t){return e.setState({username:t.target.value})}})),l.a.createElement("li",null,l.a.createElement("input",{type:"password",name:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(t){return e.setState({password:t.target.value})}})),l.a.createElement("li",null,l.a.createElement("button",{onClick:this.login.bind(this)},"\u767b\u9646"))))))}}]),a}(l.a.Component),Oe=Object(b.b)()(ve),ge=(l.a.Component,function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(m.a,null,l.a.createElement(p,null,l.a.createElement(d.d,null,l.a.createElement(d.b,{path:"/login",component:Oe}),l.a.createElement(d.b,{path:"/",render:function(){return l.a.createElement(x,null,l.a.createElement(d.d,null,l.a.createElement(d.b,{path:"/order",component:te}),l.a.createElement(d.b,{path:"/client",component:ie}),l.a.createElement(d.b,{path:"/permission",component:pe}),l.a.createElement(d.a,{to:"/order"})))}}))))}}]),a}(l.a.Component)),we=a(66),je=a(178),ke=a(251),Ie=a.n(ke),Ce=(a(547),Object(we.combineReducers)({userInfo:Ee.reducer,menu:k.reducer})),Se={key:"root",storage:Ie.a,blacklist:["menu"]},xe=Object(je.a)(Se,Ce),Ne=Object(we.createStore)(xe),Le=Object(je.b)(Ne),Te=a(252);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(b.a,{store:Ne},l.a.createElement(Te.PersistGate,{loading:null,persistor:Le},l.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[258,1,2]]]);